<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EntityScout Pro - Dashboard</title>
    <link rel="stylesheet" href="styles/dashboard.css">
</head>
<body>
    <div class="dashboard-container">
        <header class="dashboard-header" role="banner">
            <div class="header-content">
                <h1 class="dashboard-title">
                    <img src="icons/icon48.png" alt="EntityScout Pro Logo" class="logo">
                    EntityScout Pro Dashboard
                </h1>
                <div class="header-actions">
                    <button id="exportBtn" class="btn btn-secondary" aria-label="Export data to CSV or other formats">
                        <span class="icon-export" aria-hidden="true">?</span>
                        Export Data
                    </button>
                    <button id="settingsBtn" class="btn btn-outline" aria-label="Open settings">
                        <span class="icon-settings" aria-hidden="true">??</span>
                        Settings
                    </button>
                </div>
            </div>
        </header>

        <nav class="dashboard-nav" role="navigation" aria-label="Dashboard navigation">
            <ul class="nav-tabs" role="tablist">
                <li class="nav-item">
                    <button class="nav-link active" data-tab="overview" role="tab" aria-controls="overview" aria-selected="true" tabindex="0">Overview</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" data-tab="entities" role="tab" aria-controls="entities" aria-selected="false" tabindex="-1">Entities</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" data-tab="competitors" role="tab" aria-controls="competitors" aria-selected="false" tabindex="-1">Competitors</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" data-tab="insights" role="tab" aria-controls="insights" aria-selected="false" tabindex="-1">Insights</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" data-tab="history" role="tab" aria-controls="history" aria-selected="false" tabindex="-1">History</button>
                </li>
            </ul>
        </nav>

        <main class="dashboard-main" role="main">
            <div id="overview" class="tab-content active" role="tabpanel" aria-labelledby="overview-tab">
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Total Entities</h3>
                        <div class="stat-value" id="totalEntities" aria-live="polite">0</div>
                        <div class="stat-change" id="entitiesChange" aria-live="polite">?</div>
                    </div>
                    <div class="stat-card">
                        <h3>Competitors Analyzed</h3>
                        <div class="stat-value" id="totalCompetitors" aria-live="polite">0</div>
                        <div class="stat-change" id="competitorsChange" aria-live="polite">?</div>
                    </div>
                    <div class="stat-card">
                        <h3>Avg Confidence Score</h3>
                        <div class="stat-value" id="avgConfidence" aria-live="polite">0%</div>
                        <div class="stat-change" id="confidenceChange" aria-live="polite">?</div>
                    </div>
                    <div class="stat-card">
                        <h3>Last Analysis</h3>
                        <div class="stat-value small" id="lastAnalysis" aria-live="polite">Never</div>
                        <div class="stat-change">?</div>
                    </div>
                </div>

                <div class="overview-charts">
                    <div class="chart-container">
                        <h3>Entity Confidence Distribution</h3>
                        <canvas id="confidenceChart" aria-label="Chart showing distribution of entity confidence scores"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>Entity Types</h3>
                        <canvas id="entityTypesChart" aria-label="Chart showing breakdown of entity types"></canvas>
                    </div>
                </div>

                <div class="recent-activity">
                    <h3>Recent Activity</h3>
                    <div class="activity-list" id="recentActivity" aria-live="polite">
                        <div class="activity-item">
                            <div class="activity-icon" aria-hidden="true">?</div>
                            <div class="activity-content">
                                <div class="activity-title">No recent analysis found</div>
                                <div class="activity-time">Start analyzing competitors to see activity</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="entities" class="tab-content" role="tabpanel" aria-labelledby="entities-tab">
                <div class="entities-header">
                    <div class="search-filters">
                        <input type="text" id="entitySearch" placeholder="Search entities..." class="search-input" aria-label="Search entities">
                        <select id="entityTypeFilter" class="filter-select" aria-label="Filter by entity type">
                            <option value="">All Types</option>
                            <option value="Person">Person</option>
                            <option value="Organization">Organization</option>
                            <option value="Location">Location</option>
                            <option value="Product">Product</option>
                            <option value="Technology">Technology</option>
                        </select>
                        <select id="confidenceFilter" class="filter-select" aria-label="Filter by confidence level">
                            <option value="">All Confidence</option>
                            <option value="high">High (80%+)</option>
                            <option value="medium">Medium (60-79%)</option>
                            <option value="low">Low (<60%)</option>
                        </select>
                    </div>
                    <button id="analyzeNewBtn" class="btn btn-primary" aria-label="Analyze a new competitor website">
                        <span class="icon-plus" aria-hidden="true">?</span>
                        Analyze New Site
                    </button>
                </div>

                <div class="entities-table-container">
                    <table class="entities-table" aria-label="List of extracted entities">
                        <thead>
                            <tr>
                                <th scope="col">Entity</th>
                                <th scope="col">Type</th>
                                <th scope="col">Confidence</th>
                                <th scope="col">Frequency</th>
                                <th scope="col">Sources</th>
                                <th scope="col">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="entitiesTableBody">
                            <tr class="empty-state">
                                <td colspan="6">
                                    <div class="empty-message">
                                        <div class="empty-icon" aria-hidden="true">?</div>
                                        <div>No entities found. Start by analyzing a competitor website.</div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <nav class="pagination" id="entitiesPagination" aria-label="Entities pagination">
                    <button class="pagination-btn" id="prevPage" disabled aria-label="Previous page">Previous</button>
                    <span class="pagination-info" aria-live="polite">Page 1 of 1</span>
                    <button class="pagination-btn" id="nextPage" disabled aria-label="Next page">Next</button>
                </nav>
            </div>

            <div id="competitors" class="tab-content" role="tabpanel" aria-labelledby="competitors-tab">
                <div class="competitors-header">
                    <h2>Competitor Analysis</h2>
                    <button id="addCompetitorBtn" class="btn btn-primary" aria-label="Add new competitor for analysis">Add Competitor</button>
                </div>

                <div class="competitors-grid" id="competitorsGrid" role="list" aria-label="List of analyzed competitors">
                    <div class="competitor-card add-competitor" role="listitem">
                        <div class="add-competitor-content">
                            <div class="add-icon" aria-hidden="true">+</div>
                            <div class="add-text">Add your first competitor</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="insights" class="tab-content" role="tabpanel" aria-labelledby="insights-tab">
                <div class="insights-header">
                    <h2>SEO Insights & Recommendations</h2>
                    <button id="generateInsightsBtn" class="btn btn-primary" aria-label="Generate new SEO insights">Generate New Insights</button>
                </div>

                <div class="insights-container" id="insightsContainer" aria-live="polite">
                    <div class="insight-card">
                        <div class="insight-header">
                            <div class="insight-icon" aria-hidden="true">?</div>
                            <div class="insight-title">SEO Opportunity Analysis</div>
                        </div>
                        <div class="insight-content">
                            <p>Analyze competitor entities to discover new SEO opportunities and content gaps.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="history" class="tab-content" role="tabpanel" aria-labelledby="history-tab">
                <div class="history-header">
                    <h2>Analysis History</h2>
                    <div class="history-filters">
                        <select id="historyPeriod" class="filter-select" aria-label="Filter history by time period">
                            <option value="7">Last 7 days</option>
                            <option value="30">Last 30 days</option>
                            <option value="90">Last 90 days</option>
                            <option value="">All time</option>
                        </select>
                        <button id="clearHistoryBtn" class="btn btn-danger" aria-label="Clear all analysis history">Clear History</button>
                    </div>
                </div>

                <div class="history-timeline" id="historyTimeline" aria-live="polite">
                    <div class="empty-state">
                        <div class="empty-icon" aria-hidden="true">?</div>
                        <div>No analysis history available</div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div id="addCompetitorModal" class="modal" role="dialog" aria-labelledby="modal-title" aria-describedby="modal-description" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Add Competitor</h3>
                <button class="modal-close" aria-label="Close modal">&times;</button>
            </div>
            <div class="modal-body">
                <p id="modal-description" class="sr-only">Enter competitor URL to analyze their entity data</p>
                <form id="addCompetitorForm">
                    <div class="form-group">
                        <label for="competitorUrl">Competitor URL</label>
                        <input type="url" id="competitorUrl" required placeholder="https://example.com" aria-describedby="url-help">
                        <small id="url-help">Enter the full URL of the competitor website to analyze</small>
                    </div>
                    <div class="form-group">
                        <label for="competitorName">Name (optional)</label>
                        <input type="text" id="competitorName" placeholder="Competitor name" aria-describedby="name-help">
                        <small id="name-help">Optional: Enter a name to identify this competitor</small>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancelAddCompetitor">Cancel</button>
                        <button type="submit" class="btn btn-primary">Analyze</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="loadingOverlay" class="loading-overlay hidden" aria-hidden="true">
        <div class="loading-spinner" role="status" aria-live="assertive">
            <div class="spinner"></div>
            <div class="loading-text">Analyzing entities...</div>
        </div>
    </div>

    <script src="scripts/chart.min.js"></script>
    <script src="scripts/dashboard.js"></script>
</body>
</html>